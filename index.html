<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نتيجة الشهادة الإعدادية 2025 - بني سويف</title>
    
    <!-- Google Fonts: Cairo & Tajawal -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&family=Tajawal:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <style>
        /* --- CSS Variables for Enhanced Theming --- */
        :root {
            /* Light Theme Colors - Modern Professional */
            --bg-gradient-start: #f8fafc;
            --bg-gradient-end: #e2e8f0;
            --card-bg: rgba(255, 255, 255, 0.98);
            --card-border: rgba(148, 163, 184, 0.2);
            --card-shadow: rgba(15, 23, 42, 0.08);
            --header-bg: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            --header-text: #f8fafc;
            --text-color: #0f172a;
            --primary-color: #3b82f6;
            --primary-hover: #2563eb;
            --secondary-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --success-color: #059669;
            --section-bg: #ffffff;
            --info-label-color: #475569;
            --info-border-color: #e2e8f0;
            --non-additive-bg: #f1f5f9;
            --non-additive-text: #3b82f6;
            --non-additive-border: #3b82f6;
            --absent-bg: #fef2f2;
            --absent-text: #dc2626;
            --footer-text-color: #64748b;
            --input-bg: #ffffff;
            --input-border: #d1d5db;
            --input-focus-border: #3b82f6;
            --success-gradient: linear-gradient(135deg, #10b981, #059669);
            --accent-color: #8b5cf6;
            --glass-bg: rgba(255, 255, 255, 0.8);
            --glass-border: rgba(148, 163, 184, 0.3);
            --shadow-light: rgba(15, 23, 42, 0.05);
            --shadow-medium: rgba(15, 23, 42, 0.1);
            --shadow-heavy: rgba(15, 23, 42, 0.15);
            --btn-primary-bg: #3b82f6;
            --btn-primary-text: #ffffff;
            --btn-secondary-bg: #6b7280;
            --btn-secondary-text: #ffffff;
        }

        body.dark-theme {
            /* Dark Theme Colors - Modern Professional */
            --bg-gradient-start: #0f172a;
            --bg-gradient-end: #1e293b;
            --card-bg: rgba(30, 41, 59, 0.95);
            --card-border: rgba(71, 85, 105, 0.3);
            --card-shadow: rgba(0, 0, 0, 0.3);
            --header-bg: linear-gradient(135deg, #1e293b 0%, #334155 50%, #475569 100%);
            --header-text: #f8fafc;
            --text-color: #f1f5f9;
            --primary-color: #60a5fa;
            --primary-hover: #3b82f6;
            --secondary-color: #34d399;
            --warning-color: #fbbf24;
            --danger-color: #f87171;
            --success-color: #10b981;
            --section-bg: #1e293b;
            --info-label-color: #cbd5e1;
            --info-border-color: #475569;
            --non-additive-bg: #334155;
            --non-additive-text: #60a5fa;
            --non-additive-border: #60a5fa;
            --absent-bg: #450a0a;
            --absent-text: #f87171;
            --footer-text-color: #94a3b8;
            --input-bg: #334155;
            --input-border: #475569;
            --input-focus-border: #60a5fa;
            --success-gradient: linear-gradient(135deg, #34d399, #10b981);
            --accent-color: #a78bfa;
            --glass-bg: rgba(30, 41, 59, 0.8);
            --glass-border: rgba(71, 85, 105, 0.3);
            --shadow-light: rgba(0, 0, 0, 0.2);
            --shadow-medium: rgba(0, 0, 0, 0.3);
            --shadow-heavy: rgba(0, 0, 0, 0.5);
            --btn-primary-bg: #60a5fa;
            --btn-primary-text: #0f172a;
            --btn-secondary-bg: #475569;
            --btn-secondary-text: #f1f5f9;
        }

        /* --- General Styles --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', 'Tajawal', sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end));
            min-height: 100vh;
            padding: 1rem 0;
            color: var(--text-color);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            position: relative;
            overflow-x: hidden;
        }

        @media (max-width: 768px) {
            body {
                padding: 0.5rem 0;
                justify-content: flex-start;
            }
        }

        /* Animated Background Elements */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
            animation: backgroundFloat 20s ease-in-out infinite;
        }

        @keyframes backgroundFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(1deg); }
        }

        .container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            padding: 0 0.8rem;
            position: relative;
            z-index: 1;
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 0.6rem;
                max-width: 100%;
            }
        }

        /* --- Enhanced Theme Switcher --- */
        .theme-switcher-container {
            position: fixed;
            top: 2rem;
            left: 2rem;
            z-index: 1000;
        }
        
        .theme-switcher {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 2px solid var(--glass-border);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--text-color);
            box-shadow: 0 8px 32px var(--shadow-medium);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .theme-switcher::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }
        
        .theme-switcher:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 12px 40px var(--shadow-heavy);
        }

        .theme-switcher:hover::before {
            transform: translateX(100%);
        }
        
        .theme-switcher .bi-sun-fill { display: none; }
        body.dark-theme .theme-switcher .bi-sun-fill { display: inline-block; }
        body.dark-theme .theme-switcher .bi-moon-stars-fill { display: none; }

        /* --- Enhanced Header Styles --- */
        .header {
            background: var(--header-bg);
            color: var(--header-text);
            padding: 1.5rem 1.2rem;
            text-align: center;
            margin-bottom: 1.2rem;
            border-radius: 1.2rem;
            box-shadow: 0 15px 40px var(--shadow-medium);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        @media (max-width: 768px) {
            .header {
                padding: 1.2rem 1rem;
                margin-bottom: 1rem;
                border-radius: 1rem;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 1rem 0.8rem;
                margin-bottom: 0.8rem;
                border-radius: 0.8rem;
            }
        }
        
        .header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%),
                conic-gradient(from 0deg, transparent, rgba(255,255,255,0.1), transparent);
            pointer-events: none;
            animation: headerShine 8s linear infinite;
        }

        @keyframes headerShine {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .header h1 {
            font-family: 'Tajawal', 'Cairo', sans-serif;
            font-weight: 900;
            font-size: 1.8rem;
            margin-bottom: 0.4rem;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
            position: relative;
            background: linear-gradient(45deg, #ffffff, #f0f8ff, #ffffff);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: textShimmer 3s ease-in-out infinite;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.5rem;
                margin-bottom: 0.3rem;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.3rem;
                margin-bottom: 0.2rem;
            }
        }

        @keyframes textShimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .header p {
            font-size: 1rem;
            opacity: 0.95;
            font-weight: 600;
            position: relative;
            margin-top: 0.2rem;
        }

        @media (max-width: 768px) {
            .header p {
                font-size: 0.9rem;
                margin-top: 0.15rem;
            }
        }

        @media (max-width: 480px) {
            .header p {
                font-size: 0.8rem;
                margin-top: 0.1rem;
            }
        }
        
        .logo-container {
            width: 60px;
            height: 60px;
            margin: 0 auto 0.8rem;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid rgba(255,255,255,0.3);
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: logoFloat 6s ease-in-out infinite;
        }

        @media (max-width: 768px) {
            .logo-container {
                width: 50px;
                height: 50px;
                margin: 0 auto 0.6rem;
            }
        }

        @media (max-width: 480px) {
            .logo-container {
                width: 45px;
                height: 45px;
                margin: 0 auto 0.4rem;
            }
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
        
        .logo-container i {
            font-size: 2rem;
            color: rgba(255,255,255,0.95);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
        }

        @media (max-width: 768px) {
            .logo-container i {
                font-size: 1.6rem;
            }
        }

        @media (max-width: 480px) {
            .logo-container i {
                font-size: 1.4rem;
            }
        }

        /* --- Enhanced Card Styles --- */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 2px solid var(--card-border);
            border-radius: 1.2rem;
            box-shadow: 0 20px 60px var(--shadow-medium);
            color: var(--text-color);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 1.2rem;
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .card {
                border-radius: 1rem;
                margin-bottom: 1rem;
            }
        }

        @media (max-width: 480px) {
            .card {
                border-radius: 0.8rem;
                margin-bottom: 0.8rem;
            }
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(255,255,255,0.05) 100%);
            pointer-events: none;
        }
        
        .card-body {
            padding: 1.5rem;
            position: relative;
            z-index: 1;
        }
        
        @media (max-width: 768px) {
            .card-body {
                padding: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .card-body {
                padding: 1rem;
            }
        }

        /* --- Enhanced Search Form --- */
        .search-container {
            padding: 1.2rem 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        @media (max-width: 768px) {
            .search-container {
                padding: 1rem 0;
            }
        }

        @media (max-width: 480px) {
            .search-container {
                padding: 0.8rem 0;
            }
        }
        
        .search-frame {
            padding: 1.5rem;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border-radius: 1rem;
            border: 2px solid var(--glass-border);
            width: 100%;
            max-width: 450px;
            box-shadow: 0 15px 40px var(--shadow-light);
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .search-frame {
                padding: 1.2rem;
                border-radius: 0.8rem;
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .search-frame {
                padding: 1rem;
                border-radius: 0.6rem;
            }
        }

        .search-frame::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.05), transparent);
            pointer-events: none;
        }
        
        .form-label {
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--text-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            text-shadow: 0 2px 4px var(--shadow-light);
        }

        @media (max-width: 768px) {
            .form-label {
                font-size: 1.1rem;
                margin-bottom: 0.8rem;
                gap: 0.5rem;
            }
        }

        @media (max-width: 480px) {
            .form-label {
                font-size: 1rem;
                margin-bottom: 0.6rem;
            }
        }

        .form-label i {
            font-size: 1.4rem;
            color: var(--primary-color);
            filter: drop-shadow(0 2px 4px var(--shadow-light));
        }

        @media (max-width: 768px) {
            .form-label i {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .form-label i {
                font-size: 1.1rem;
            }
        }
        
        .form-control {
            background: var(--input-bg);
            border: 3px solid var(--input-border);
            border-radius: 1rem;
            padding: 1.2rem 1.5rem;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-color);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            width: 100%;
            max-width: 300px;
            margin: 0 auto;
            display: block;
            box-shadow: 0 8px 25px var(--shadow-light);
            position: relative;
        }

        @media (max-width: 768px) {
            .form-control {
                padding: 1rem 1.2rem;
                font-size: 1.1rem;
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .form-control {
                padding: 0.8rem 1rem;
                font-size: 1rem;
            }
        }
        
        .form-control:focus {
            border-color: var(--input-focus-border);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2), 0 12px 35px var(--shadow-medium);
            outline: none;
            transform: translateY(-2px);
        }

        .form-control::placeholder {
            color: var(--info-label-color);
            opacity: 0.7;
        }
        
        .btn {
            border-radius: 1rem;
            font-weight: 800;
            font-size: 1.1rem;
            padding: 1.2rem 1.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            width: 100%;
            max-width: 300px;
            margin: 1.5rem auto 0;
            border: none;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px var(--shadow-medium);
        }

        @media (max-width: 768px) {
            .btn {
                padding: 1rem 1.2rem;
                font-size: 1rem;
                margin: 1.2rem auto 0;
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .btn {
                padding: 0.8rem 1rem;
                font-size: 0.9rem;
                margin: 1rem auto 0;
            }
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }
        
        .btn-primary {
            background: var(--btn-primary-bg);
            color: var(--btn-primary-text);
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            border: none;
        }
        
        .btn-primary:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 15px 40px var(--shadow-heavy);
            background: var(--primary-hover);
            color: var(--btn-primary-text);
        }

        .btn-primary:active {
            transform: translateY(-2px) scale(1.01);
        }
        
        .btn-secondary {
            background: var(--btn-secondary-bg);
            color: var(--btn-secondary-text);
            border: none;
        }
        
        .btn-secondary:hover {
            background: var(--primary-color);
            color: var(--btn-secondary-text);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 15px 40px var(--shadow-heavy);
        }

        /* --- Enhanced Loading Spinner --- */
        .loading-spinner {
            display: inline-block;
            width: 1.8rem;
            height: 1.8rem;
            border: 4px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
            margin-right: 0.8rem;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        #loadingSpinner {
            display: none;
        }

        /* --- Enhanced Loading Message --- */
        .loading-message {
            display: none;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 2px solid var(--glass-border);
            border-radius: 1.5rem;
            padding: 2rem;
            margin: 2rem auto;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 15px 40px var(--shadow-medium);
            animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .loading-message .loading-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
            animation: pulse 2s ease-in-out infinite;
        }

        .loading-message .loading-text {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 0.5rem;
        }

        .loading-message .loading-subtext {
            font-size: 1rem;
            color: var(--info-label-color);
            opacity: 0.8;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
        }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        /* --- Enhanced Alert Messages --- */
        .alert {
            border-radius: 1.2rem;
            padding: 1.8rem 2rem;
            font-size: 1.2rem;
            margin: 2rem auto 0;
            border: none;
            text-align: center;
            max-width: 600px;
            backdrop-filter: blur(15px);
            box-shadow: 0 10px 30px var(--shadow-light);
            position: relative;
            overflow: hidden;
            animation: slideInDown 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .alert::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            pointer-events: none;
        }

        @keyframes slideInDown {
            from { 
                opacity: 0; 
                transform: translateY(-30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        .alert-warning {
            background: rgba(237, 137, 54, 0.2);
            color: var(--warning-color);
            border: 2px solid rgba(237, 137, 54, 0.3);
        }
        
        .alert-danger {
            background: rgba(245, 101, 101, 0.2);
            color: var(--danger-color);
            border: 2px solid rgba(245, 101, 101, 0.3);
        }
        
        .alert-success {
            background: rgba(72, 187, 120, 0.2);
            color: var(--success-color);
            border: 2px solid rgba(72, 187, 120, 0.3);
        }

        .alert i {
            font-size: 1.4rem;
            margin-right: 0.8rem;
            filter: drop-shadow(0 2px 4px var(--shadow-light));
        }

        /* --- Enhanced Result Display --- */
        #resultDisplay {
            display: none;
            animation: fadeInScale 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 900px;
            margin: 0 auto;
        }
        
        @keyframes fadeInScale {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }
        
        .student-data-section {
            background: var(--section-bg);
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 10px 30px var(--shadow-light);
            margin-bottom: 1.5rem;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid var(--glass-border);
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .student-data-section {
                padding: 1.2rem;
                margin-bottom: 1.2rem;
                border-radius: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .student-data-section {
                padding: 1rem;
                margin-bottom: 1rem;
                border-radius: 0.6rem;
            }
        }

        .student-data-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, transparent 50%, rgba(118, 75, 162, 0.05) 100%);
            pointer-events: none;
        }

        .student-data-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 70px var(--shadow-medium);
        }
        
        .info-row {
            display: flex;
            justify-content: flex-start; 
            align-items: center;
            gap: 1rem; 
            padding: 0.8rem;
            border-bottom: 1px solid var(--info-border-color);
            transition: all 0.3s ease;
            border-radius: 0.4rem;
        }

        @media (max-width: 768px) {
            .info-row {
                padding: 0.6rem;
                flex-direction: column;
                align-items: flex-start;
                gap: 0.3rem;
            }
        }

        @media (max-width: 480px) {
            .info-row {
                padding: 0.5rem;
                gap: 0.2rem;
            }
        }

        .info-row:hover {
            background: var(--glass-bg);
            margin: 0 -0.5rem;
            padding: 0.8rem 0.5rem;
            border-radius: 0.4rem;
        }
        
        .info-row:last-child {
            border-bottom: none;
        }
        
        .info-label {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            color: var(--info-label-color);
            font-weight: 700;
            font-size: 0.9rem;
            flex-shrink: 0; /* Prevents the label from shrinking */
        }

        @media (max-width: 768px) {
            .info-label {
                gap: 0.3rem;
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .info-label {
                gap: 0.25rem;
                font-size: 0.8rem;
            }
        }

        .info-label i {
            font-size: 1rem;
            color: var(--primary-color);
            filter: drop-shadow(0 2px 4px var(--shadow-light));
        }

        @media (max-width: 768px) {
            .info-label i {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .info-label i {
                font-size: 0.8rem;
            }
        }
        
        .info-value {
            font-weight: 800;
            text-align: right;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap; /* Prevents long text from wrapping */
            position: relative;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .info-value {
                white-space: normal; /* Allow wrapping on small screens */
                text-align: right;
                font-size: 0.85rem;
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .info-value {
                font-size: 0.8rem;
            }
        }
        
        .info-value.seat {
            color: var(--primary-color);
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .info-value.seat {
                font-size: 0.95rem;
            }
        }

        @media (max-width: 480px) {
            .info-value.seat {
                font-size: 0.9rem;
            }
        }
        
        .info-value.name {
            color: var(--secondary-color);
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .info-value.name {
                font-size: 0.95rem;
            }
        }

        @media (max-width: 480px) {
            .info-value.name {
                font-size: 0.9rem;
            }
        }
        
        .info-value.school, .info-value.admin {
            color: var(--text-color);
        }
        
        .grades-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 1.5rem 0;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 15px 40px var(--shadow-light);
            backdrop-filter: blur(10px);
        }

        @media (max-width: 768px) {
            .grades-table {
                margin: 1rem 0;
                border-radius: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .grades-table {
                margin: 0.8rem 0;
                border-radius: 0.6rem;
            }
        }
        
        .grades-table th {
            background: var(--header-bg);
            color: white;
            font-weight: 800;
            padding: 1.2rem;
            text-align: center;
            font-size: 1.1rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
        }

        @media (max-width: 768px) {
            .grades-table th {
                padding: 1rem;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .grades-table th {
                padding: 0.8rem;
                font-size: 0.9rem;
            }
        }

        .grades-table th::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            pointer-events: none;
        }
        
        .grades-table td {
            padding: 1.2rem;
            border-bottom: 2px solid var(--info-border-color);
            text-align: center;
            font-size: 1rem;
            font-weight: 700;
            transition: all 0.3s ease;
            position: relative;
        }

        @media (max-width: 768px) {
            .grades-table td {
                padding: 1rem;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .grades-table td {
                padding: 0.8rem;
                font-size: 0.85rem;
            }
        }
        
        .grades-table tr:nth-child(even) {
            background: rgba(102, 126, 234, 0.05);
        }
        
        .grades-table tr:hover {
            background: var(--glass-bg);
            transform: scale(1.02);
            box-shadow: 0 5px 15px var(--shadow-light);
        }
        
        .non-additive-subject td {
            background: var(--non-additive-bg) !important;
            color: var(--non-additive-text);
            font-weight: 800;
        }
        
        .non-additive-subject td:first-child {
            border-right: 5px solid var(--non-additive-border);
            position: relative;
        }

        .non-additive-subject td:first-child::before {
            content: '★';
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--non-additive-border);
            font-size: 1.2rem;
        }
        
        .grade-absent {
            background: var(--absent-bg) !important;
            color: var(--absent-text) !important;
            font-weight: 800;
            position: relative;
        }

        .grade-absent::before {
            content: '⚠';
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 0.8rem;
        }
        
        .total-score-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--success-gradient);
            color: white;
            padding: 1.8rem;
            border-radius: 1.2rem;
            margin-top: 1.5rem;
            box-shadow: 0 15px 40px rgba(72, 187, 120, 0.3);
            position: relative;
            overflow: hidden;
            animation: totalScoreGlow 3s ease-in-out infinite;
        }

        @media (max-width: 768px) {
            .total-score-container {
                padding: 1.5rem;
                border-radius: 1rem;
                margin-top: 1.2rem;
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        @media (max-width: 480px) {
            .total-score-container {
                padding: 1.2rem;
                border-radius: 0.8rem;
                margin-top: 1rem;
            }
        }

        .total-score-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
            pointer-events: none;
        }

        @keyframes totalScoreGlow {
            0%, 100% { box-shadow: 0 15px 40px rgba(72, 187, 120, 0.3); }
            50% { box-shadow: 0 20px 50px rgba(72, 187, 120, 0.5); }
        }
        
        .total-label {
            font-size: 1.4rem;
            font-weight: 800;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            .total-label {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .total-label {
                font-size: 1.1rem;
            }
        }
        
        /* --- Enhanced Total Score Fraction Styles --- */
        .total-fraction {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.2rem;
        }

        .total-numerator {
            font-size: 2.2rem;
            font-weight: 900;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
            animation: numberCount 2s ease-out;
            line-height: 1;
        }

        .total-divider {
            width: 60px;
            height: 3px;
            background: white;
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .total-denominator {
            font-size: 1.4rem;
            font-weight: 700;
            opacity: 0.95;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            line-height: 1;
        }

        @media (max-width: 768px) {
            .total-numerator {
                font-size: 1.8rem;
            }
            
            .total-divider {
                width: 50px;
                height: 2px;
            }
            
            .total-denominator {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .total-numerator {
                font-size: 1.6rem;
            }
            
            .total-divider {
                width: 45px;
                height: 2px;
            }
            
            .total-denominator {
                font-size: 1.1rem;
            }
        }

        @keyframes numberCount {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* --- Enhanced Footer --- */
        .footer-credit {
            text-align: center;
            padding: 2rem;
            color: var(--footer-text-color);
            font-size: 1.1rem;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 2px solid var(--glass-border);
            border-radius: 1.5rem;
            margin-top: 2rem;
            box-shadow: 0 10px 30px var(--shadow-light);
            position: relative;
            overflow: hidden;
        }

        .footer-credit::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.05), transparent);
            pointer-events: none;
        }
        
        .footer-credit p {
            margin-bottom: 0.8rem;
            font-weight: 600;
        }
        
        .footer-credit .title {
            font-weight: 800;
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        /* --- Enhanced Responsive Adjustments --- */
        @media (max-width: 768px) {
            body {
                padding: 1rem 0;
            }

            .theme-switcher-container {
                top: 1rem;
                left: 1rem;
            }

            .theme-switcher {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            .header {
                padding: 2rem 1.5rem;
                margin-bottom: 2rem;
                border-radius: 1.5rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .header p {
                font-size: 1.2rem;
            }

            .logo-container {
                width: 100px;
                height: 100px;
                margin-bottom: 1.5rem;
            }

            .logo-container i {
                font-size: 3rem;
            }
            
            .card-body {
                padding: 1.5rem;
            }
            
            .search-frame {
                padding: 2rem;
            }

            .form-label {
                font-size: 1.2rem;
            }

            .form-control {
                font-size: 1.2rem;
                padding: 1.2rem 1.5rem;
            }

            .btn {
                font-size: 1.1rem;
                padding: 1.2rem 1.5rem;
            }
            
            .info-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
                padding: 1.2rem 0;
            }
            
            .info-value {
                max-width: 100%;
                text-align: right;
                width: 100%;
            }
            
            .total-score-container {
                flex-direction: column;
                gap: 1.5rem;
                text-align: center;
                padding: 2rem;
            }

            .total-label {
                font-size: 1.5rem;
            }

            .total-value {
                font-size: 2.2rem;
            }
            
            .form-control, .btn {
                max-width: 100%;
            }

            .grades-table th,
            .grades-table td {
                padding: 1rem;
                font-size: 1rem;
            }

            .student-data-section {
                padding: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 1rem;
            }

            .header h1 {
                font-size: 1.6rem;
            }

            .header p {
                font-size: 1rem;
            }

            .card-body {
                padding: 1rem;
            }

            .search-frame {
                padding: 1.5rem;
            }

            .grades-table th,
            .grades-table td {
                padding: 0.8rem;
                font-size: 0.9rem;
            }

            .total-value {
                font-size: 2rem;
            }

            .total-label {
                font-size: 1.3rem;
            }
        }

        /* --- Additional Animations --- */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px var(--primary-color); }
            50% { box-shadow: 0 0 30px var(--primary-color), 0 0 40px var(--primary-color); }
        }

        /* --- Accessibility Improvements --- */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* --- Focus Styles for Better Accessibility --- */
        .theme-switcher:focus,
        .form-control:focus,
        .btn:focus {
            outline: 3px solid var(--accent-color);
            outline-offset: 2px;
        }

        /* --- Print Styles --- */
        @media print {
            .theme-switcher-container,
            .search-container,
            .btn-secondary {
                display: none !important;
            }
            
            .header,
            .card,
            .student-data-section {
                box-shadow: none !important;
                border: 1px solid #000 !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Enhanced Theme Switcher -->
        <div class="theme-switcher-container">
            <button class="theme-switcher" id="themeSwitcher" aria-label="تبديل الثيم" title="تبديل بين الوضع الفاتح والداكن">
                <i class="bi bi-moon-stars-fill"></i>
                <i class="bi bi-sun-fill"></i>
            </button>
        </div>

        <!-- Enhanced Header -->
        <div class="header">
            <div class="logo-container">
                <i class="bi bi-mortarboard-fill"></i>
            </div>
            <h1>نتيجة الشهادة الإعدادية - الترم الثاني 2025</h1>
            <p>محافظة بني سويف</p>
        </div>

        <!-- Enhanced Main Card -->
        <div class="card">
            <div class="card-body">
                <!-- Enhanced Search Form -->
                <div id="searchContainer">
                    <div class="search-container">
                        <div class="search-frame">
                            <form id="resultForm">
                                <div class="mb-4">
                                    <label for="seatNumber" class="form-label">
                                        <i class="bi bi-person-badge"></i>
                                        أدخل رقم الجلوس:
                                    </label>
                                    <input 
                                        type="number" 
                                        class="form-control form-control-lg" 
                                        id="seatNumber" 
                                        placeholder="مثال: 123456"
                                        required
                                        autocomplete="off"
                                        min="1"
                                        max="999999"
                                    >
                                </div>
                                <button type="submit" class="btn btn-primary btn-lg" id="searchButton">
                                    <span id="buttonText">
                                        <i class="bi bi-search"></i>
                                        عرض النتيجة
                                    </span>
                                    <span class="loading-spinner" id="loadingSpinner" role="status" aria-hidden="true"></span>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Loading Message -->
                <div id="loadingMessage" class="loading-message">
                    <div class="loading-icon">
                        <i class="bi bi-hourglass-split"></i>
                    </div>
                    <div class="loading-text">جاري البحث عن النتيجة...</div>
                    <div class="loading-subtext">يرجى الانتظار، جاري تحميل البيانات من الخادم</div>
                </div>

                <!-- Enhanced Alert Message Area -->
                <div id="alertMessage" class="mt-4"></div>

                <!-- Enhanced Result Display Area -->
                <div id="resultDisplay">
                    <!-- Result content will be generated by JS -->
                </div>
            </div>
        </div>

        <!-- Enhanced Footer -->
        <div class="footer-credit">
            <p>جميع الحقوق محفوظة - تطوير وبرمجة: الأستاذ / محمود صديق</p>
            <p class="title">مدير قسم الجودة - إدارة سمسطا التعليمية</p>
        </div>
    </div>

    <script>
        // Wait for the DOM to be fully loaded before running the script
        document.addEventListener('DOMContentLoaded', () => {
            // --- Constants and Global Variables ---
            const googleSheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTgC-crAdGe0MIVrjF4-cAHSNWEiRQ9Vhotn3PdGEGWAnEgweR6hgbCTk_4Zgp9UA/pub?output=csv';
            
            // --- UI Element Selection ---
            const resultForm = document.getElementById('resultForm');
            const seatNumberInput = document.getElementById('seatNumber');
            const alertMessage = document.getElementById('alertMessage');
            const resultDisplay = document.getElementById('resultDisplay');
            const searchContainer = document.getElementById('searchContainer');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const loadingMessage = document.getElementById('loadingMessage');
            const buttonText = document.getElementById('buttonText');
            const searchButton = document.getElementById('searchButton');
            const themeSwitcher = document.getElementById('themeSwitcher');
            
            // --- Initial Setup ---
            loadingSpinner.style.display = 'none';
            loadingMessage.style.display = 'none';

            // --- Enhanced Theme Management ---
            const applyTheme = (theme) => {
                if (theme === 'dark') {
                    document.body.classList.add('dark-theme');
                } else {
                    document.body.classList.remove('dark-theme');
                }
            };

            themeSwitcher.addEventListener('click', () => {
                const isDark = document.body.classList.toggle('dark-theme');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                
                // Add a small animation feedback
                themeSwitcher.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    themeSwitcher.style.transform = '';
                }, 150);
            });

            const savedTheme = localStorage.getItem('theme') || 'light';
            applyTheme(savedTheme);

            // --- Enhanced Event Listeners ---
            resultForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                const seatNumber = seatNumberInput.value.trim();
                
                // Clear previous messages
                alertMessage.innerHTML = '';
                resultDisplay.style.display = 'none';

                if (!seatNumber) {
                    displayAlert('الرجاء إدخال رقم الجلوس.', 'warning');
                    seatNumberInput.focus();
                    return;
                }
                
                toggleLoading(true);

                const proxyUrl = 'https://corsproxy.io/?';
                const fullUrl = `${proxyUrl}${encodeURIComponent(googleSheetUrl)}`;

                try {
                    const response = await fetch(fullUrl);
                    if (!response.ok) throw new Error(`فشل الاتصال بالخادم (${response.status})`);
                    
                    const csvText = await response.text();
                    if (!csvText || csvText.trim() === '') throw new Error("تم استلام بيانات فارغة من المصدر.");

                    const studentData = findStudentBySeatNumber(csvText, seatNumber);

                    if (studentData) {
                        displayResult(studentData);
                        displayAlert('تم العثور على النتيجة بنجاح!', 'success');
                    } else {
                        displayAlert(`رقم الجلوس "<strong>${seatNumber}</strong>" غير موجود أو غير صحيح. يرجى التأكد من الرقم والمحاولة مرة أخرى.`, 'danger');
                    }
                } catch (error) {
                    console.error('Fetch Error:', error);
                    displayAlert(`حدث خطأ فني: <strong>${error.message}</strong><br>يرجى المحاولة مرة أخرى أو التواصل مع الدعم الفني.`, 'danger');
                } finally {
                    toggleLoading(false);
                }
            });

            // Add input validation and formatting
            seatNumberInput.addEventListener('input', function(e) {
                this.value = this.value.replace(/[^0-9]/g, '');
                if (this.value.length > 0) {
                    alertMessage.innerHTML = '';
                }
            });

            seatNumberInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    resultForm.dispatchEvent(new Event('submit'));
                }
            });

            // --- Core Functions ---
            /**
             * Finds student data by seat number from CSV text based on the new column order.
             */
            function findStudentBySeatNumber(csvText, seatNumber) {
                try {
                    const rows = csvText.split(/\r?\n/).map(row => row.split(','));
                    
                    // Search for seat number in the 3rd column (index 2)
                    for (let i = 1; i < rows.length; i++) {
                        const row = rows[i];
                        if (row && row.length > 2 && row[2] && row[2].trim() === seatNumber) {
                            // Map columns based on the new order
                            return {
                                admin: row[0]?.trim() || 'لا توجد إدارة',
                                school: row[1]?.trim() || 'لا توجد مدرسة',
                                seat: row[2]?.trim() || '',
                                name: row[3]?.trim() || 'لا يوجد اسم',
                                arabic: row[4]?.trim() || '0',
                                english: row[5]?.trim() || '0',
                                social: row[6]?.trim() || '0',
                                math: row[7]?.trim() || '0',
                                science: row[8]?.trim() || '0',
                                subTotal: row[9]?.trim() || '0', 
                                computer: row[10]?.trim() || '0',
                                religion: row[11]?.trim() || '0',
                                art: row[12]?.trim() || '0',
                            };
                        }
                    }
                    return null;
                } catch (error) {
                    console.error('Error parsing CSV data:', error);
                    throw new Error('خطأ في تحليل البيانات');
                }
            }

            /**
             * Creates a single row for the grades table.
             */
            function createGradeRow(subjectName, grade, isNonAdditive = false) {
                const gradeStr = grade.toString();
                const isAbsent = isNaN(parseFloat(gradeStr.replace('٫', '.')));
                
                const rowClass = isNonAdditive ? 'non-additive-subject' : '';
                const gradeCellClass = isAbsent ? 'grade-absent' : '';
                const gradeTitle = isAbsent ? 'غائب أو غير مكتمل' : `الدرجة: ${gradeStr}`;

                return `
                    <tr class="${rowClass}" title="${isNonAdditive ? 'مادة غير مضافة للمجموع' : 'مادة أساسية'}">
                        <td class="subject-name">${subjectName}</td>
                        <td class="${gradeCellClass}" title="${gradeTitle}">${gradeStr}</td>
                    </tr>
                `;
            }

            /**
             * Displays student results with the new data order.
             */
            function displayResult(data) {
                searchContainer.style.display = 'none';
                resultDisplay.style.display = 'block';
                
                const resultHTML = `
                    <div class="student-data-section">
                        <div class="info-row">
                            <div class="info-label">
                                <i class="bi bi-geo-alt-fill"></i>
                                <span>الإدارة التعليمية:</span>
                            </div>
                            <div class="info-value admin">${data.admin}</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">
                                <i class="bi bi-building"></i>
                                <span>المدرسة:</span>
                            </div>
                            <div class="info-value school">${data.school}</div>
                        </div>
                         <div class="info-row">
                            <div class="info-label">
                                <i class="bi bi-person-badge"></i>
                                <span>رقم الجلوس:</span>
                            </div>
                            <div class="info-value seat">${data.seat}</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">
                                <i class="bi bi-person-circle"></i>
                                <span>اسم الطالب:</span>
                            </div>
                            <div class="info-value name">${data.name}</div>
                        </div>

                        <div class="table-responsive">
                            <table class="table grades-table">
                                <thead>
                                    <tr>
                                        <th><i class="bi bi-book"></i> المادة</th>
                                        <th><i class="bi bi-award"></i> الدرجة</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${createGradeRow('اللغة العربية', data.arabic)}
                                    ${createGradeRow('اللغة الإنجليزية', data.english)}
                                    ${createGradeRow('الدراسات الاجتماعية', data.social)}
                                    ${createGradeRow('الرياضيات', data.math)}
                                    ${createGradeRow('العلوم', data.science)}
                                    ${createGradeRow('الحاسب الآلي', data.computer, true)}
                                    ${createGradeRow('التربية الدينية', data.religion, true)}
                                    ${createGradeRow('التربية الفنية', data.art, true)}
                                </tbody>
                            </table>
                        </div>

                        <div class="total-score-container">
                            <div class="total-label">
                                <i class="bi bi-trophy-fill"></i>
                                المجموع الكلي
                            </div>
                            <div class="total-fraction">
                                <div class="total-numerator">${data.subTotal}</div>
                                <div class="total-divider"></div>
                                <div class="total-denominator">280</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-grid mt-4">
                        <button onclick="resetSearch()" class="btn btn-secondary btn-lg">
                            <i class="bi bi-arrow-repeat"></i>
                            البحث عن رقم جلوس آخر
                        </button>
                    </div>
                `;

                resultDisplay.innerHTML = resultHTML;
                
                // Scroll to results smoothly
                setTimeout(() => {
                    resultDisplay.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 300);
            }

            /**
             * Displays alert messages.
             */
            function displayAlert(message, type = 'info') {
                const alertClass = type === 'warning' ? 'alert-warning' : 
                                  type === 'danger' ? 'alert-danger' : 'alert-success';
                
                const iconClass = type === 'warning' ? 'bi-exclamation-triangle-fill' : 
                                 type === 'danger' ? 'bi-x-circle-fill' : 'bi-check-circle-fill';
                
                alertMessage.innerHTML = `
                    <div class="alert ${alertClass}" role="alert">
                        <i class="bi ${iconClass}"></i>
                        ${message}
                    </div>
                `;

                if (type === 'success') {
                    setTimeout(() => {
                        const alertElement = alertMessage.querySelector('.alert');
                        if (alertElement) {
                            alertElement.style.opacity = '0';
                            alertElement.style.transform = 'translateY(-20px)';
                            setTimeout(() => {
                                alertMessage.innerHTML = '';
                            }, 300);
                        }
                    }, 5000);
                }
            }

            /**
             * Toggles loading state.
             */
            function toggleLoading(isLoading) {
                if (isLoading) {
                    loadingSpinner.style.display = 'inline-block';
                    loadingMessage.style.display = 'block';
                    buttonText.innerHTML = '<i class="bi bi-hourglass-split"></i> جاري البحث...';
                    searchButton.disabled = true;
                    searchButton.style.opacity = '0.7';
                    seatNumberInput.disabled = true;
                } else {
                    loadingSpinner.style.display = 'none';
                    loadingMessage.style.display = 'none';
                    buttonText.innerHTML = '<i class="bi bi-search"></i> عرض النتيجة';
                    searchButton.disabled = false;
                    searchButton.style.opacity = '1';
                    seatNumberInput.disabled = false;
                }
            }

            /**
             * Resets search and returns to initial state.
             */
            window.resetSearch = function() {
                searchContainer.style.display = 'block';
                resultDisplay.style.display = 'none';
                alertMessage.innerHTML = '';
                seatNumberInput.value = '';
                seatNumberInput.focus();
                
                window.scrollTo({ 
                    top: 0, 
                    behavior: 'smooth' 
                });
            };

            // --- Additional Enhancements ---
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && resultDisplay.style.display === 'block') {
                    resetSearch();
                }
                if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                    e.preventDefault();
                    seatNumberInput.focus();
                }
            });

            seatNumberInput.addEventListener('focus', function() {
                this.select();
            });

            seatNumberInput.addEventListener("blur", function() {
                this.style.borderColor = "var(--input-border)";
            });

            setTimeout(() => {
                seatNumberInput.focus();
            }, 500);

            console.log('تطبيق نتائج الشهادة الإعدادية تم تحميله بنجاح! 🎓');
        });
    </script>
</body>
</html>
